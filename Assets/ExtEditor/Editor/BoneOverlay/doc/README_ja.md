# BoneOverlay - ボーン可視化・選択支援ツール

## 概要

BoneOverlayは、Unity Scene Viewでボーン（ジョイント）を視覚的に表示し、選択を簡単にするエディター拡張ツールです。3Dモデルのリギングやアニメーション作業において、通常は見えにくいボーンオブジェクトを分かりやすく可視化し、効率的な作業を支援します。

### 主な特徴

- 🎯 **直感的なボーン選択** - 球体とラベルをクリックするだけで簡単にボーンを選択
- 👁️ **スマートな自動検出** - SkinnedMeshRenderer、Animator、名前パターンから自動的にボーンを検出
- 🎨 **カスタマイズ可能な表示** - 色、サイズ、距離など細かく調整可能
- ⚡ **高パフォーマンス** - 大量のボーンでも軽快に動作する最適化設計
- 🔧 **Unity標準UI統合** - Scene Viewのツールバーにシームレスに統合

[画像: Scene Viewでボーンが可視化されている様子のスクリーンショット]

## 動作環境

- Unity 2022.3以降
- Universal Render Pipeline (URP) 対応
- エディター専用（ランタイムでは動作しません）

## インストール方法

1. Unity Package Managerを開く
2. 「Add package from disk」を選択
3. `package.json`ファイルを選択してインポート

または、Assetsフォルダに直接コピーしてください。

## 使い方

### 基本的な使い方

1. **ツールバーの有効化**
   - Scene Viewの右上にある「⋮」メニューをクリック
   - 「Overlays」→「Bone Overlay Toolbar」にチェックを入れる
   
   [画像: Overlaysメニューの操作を示すスクリーンショット]

2. **ボーン表示の有効化**
   - Scene Viewのツールバーに表示される「Bones」ボタンをクリック
   - アイコンがハイライトされ、ボーンの可視化が開始されます
   
   [画像: Bonesボタンがオンになった状態のツールバー]

3. **ボーンの選択**
   - 表示された球体またはラベルをクリックしてボーンを選択
   - Shift/Ctrlキーを押しながらクリックで複数選択も可能
   
   [画像: ボーンを選択している様子のアニメーションGIF]

### 設定のカスタマイズ

「Bones」ボタンの右側にある「▼」をクリックすると、詳細設定メニューが開きます。

[画像: ドロップダウンメニューが開いた状態]

#### Bone Settings（ボーン設定）

- **Bone Distance** - ボーンを表示する最大距離（1-100m）
- **Sphere Size** - ボーンの球体サイズ（1-100mm）
- **Line Width** - 親子間の線の太さ（0.1-10）
- **各種カラー設定**
  - Normal Color - 通常時の色
  - Selected Color - 選択時の色
  - Hover Color - ホバー時の色
  - Line Color - 接続線の色

#### Label Settings（ラベル設定）

- **Show Labels** - オブジェクト名ラベルの表示/非表示
- **Label Distance** - ラベルを表示する最大距離（1-100m）
- **Label Size** - ラベルのフォントサイズ（5-30pt）
- **Label Color** - ラベルの色

[画像: 各設定を変更した場合の表示の違いを示す比較画像]

## 活用シーン

### VRChatアバター制作

- アバターのボーン構造を確認しながら調整
- PhysBoneの設定時にボーンを簡単に選択
- 表情アニメーションの作成時に顔のボーンを視覚的に確認

[画像: VRChatアバターでの使用例]

### 3Dキャラクターアニメーション

- アニメーション作成時のボーン選択を効率化
- IKの設定時にボーンチェーンを視覚的に確認
- リギングの問題を素早く発見

[画像: アニメーション作業での使用例]

### モデルのデバッグ

- インポートしたモデルのボーン構造を確認
- 不要なボーンや名前の問題を発見
- 階層構造の理解を助ける

## 高度な使い方

### 距離フィルタリングの活用

大規模なシーンでは、距離フィルタリングを調整することで必要なボーンのみを表示できます：

- 近くの詳細な作業時は距離を短く設定
- 全体を俯瞰する時は距離を長く設定
- ラベルとボーンで別々の距離を設定可能

[画像: 距離フィルタリングの効果を示す比較画像]

### カラーカスタマイズ

作業内容に応じて色をカスタマイズすることで、視認性を向上できます：

- 暗いシーンでは明るい色に変更
- 特定のボーンを目立たせたい場合は鮮やかな色に
- 透明度も調整可能

### パフォーマンスの最適化

多数のボーンがある場合：

- 必要最小限の距離に設定
- ラベル表示をオフにして軽量化
- 作業中のエリアのみフォーカス

## トラブルシューティング

### ボーンが表示されない

1. Scene Viewで「Bones」トグルがオンになっているか確認
2. 距離設定が適切か確認（デフォルト: 50m）
3. オブジェクトにSkinnedMeshRendererまたはAnimatorがあるか確認

### 選択できない

1. ボーンがロックされていないか確認
2. 他のツールが干渉していないか確認
3. Scene Viewが適切なモードになっているか確認

### パフォーマンスが低下する

1. 表示距離を短く設定
2. ラベル表示をオフに
3. 不要なオブジェクトを非表示に

## よくある質問

**Q: GameViewでも表示されますか？**
A: いいえ、Scene View専用のツールです。

**Q: ランタイムで使用できますか？**
A: エディター専用機能のため、ビルドには含まれません。

**Q: 特定のボーンだけを表示できますか？**
A: 現在のバージョンでは自動検出されたすべてのボーンが表示されます。

**Q: カスタムボーンの検出パターンを追加できますか？**
A: 現在のバージョンでは固定のパターンのみですが、将来的に対応予定です。

## 更新履歴

### Version 1.0.0 (2025-01-05)
- 初回リリース
- EditorToolbarDropdownToggleベースの実装
- 距離ベースフィルタリング
- カラーカスタマイズ機能
- ラベルインタラクション対応

## サポート

ご質問や不具合報告は以下までお願いします：

- Email: [サポートメールアドレス]
- Discord: [Discordサーバーリンク]
- Twitter: [@ユーザー名]

## ライセンス

本ツールは[ライセンス名]ライセンスで提供されています。
詳細はLICENSEファイルをご確認ください。

---

© 2025 [制作者名]. All rights reserved.