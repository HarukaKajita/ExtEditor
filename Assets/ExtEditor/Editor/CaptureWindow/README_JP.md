# Capture Window (キャプチャウィンドウ)

## 概要

キャプチャウィンドウは、エディタ内の様々なソースからスクリーンショットを取得し、PNGファイルとして保存するために設計されたUnityエディタツールです。このツールは、プロモーション素材の作成、ビジュアルの問題のデバッグ、または単にゲームやシーンの瞬間をキャプチャするのに役立ちます。

### 主な機能:

-   **複数のキャプチャソース:**
    -   **Game View (ゲームビュー):** 選択されたカメラの出力を、ゲームビューの解像度でキャプチャします。
    -   **Scene View (シーンビュー):** 最後のアクティブなシーンビューエディタウィンドウの現在の表示状態をキャプチャします。
    -   **Render Texture (レンダーテクスチャ):** 指定された `RenderTexture` アセットから直接キャプチャできます。
-   **柔軟なカメラ選択:**
    -   現在のシーンに存在するすべてのカメラのドロップダウンリストから選択します。
    -   オブジェクトフィールドを介して `Camera` コンポーネントを直接割り当てます。
-   **カスタマイズ可能な出力:**
    -   保存する画像のカスタム出力ディレクトリを指定します（パスは `Assets` フォルダまたはプロジェクトルートからの相対パスが可能です）。
    -   PNGにアルファチャンネルを含めるオプションがあり、透明度を有効にできます。
    -   透明な背景でレンダリングを試みるオプションがあります。
-   **便利なファイル管理:**
    -   ファイルは自動的に "Capture_" プレフィックスとタイムスタンプで命名されます（例: `Capture_YYYYMMDD_HHMMSS.png`）。
    -   システムのファイルエクスプローラで出力フォルダを直接開くボタンがあります。

## 使い方

1.  **ツールを開く:**
    Unityエディタのメニューバーで `Tools > CaptureWindow` に移動し、キャプチャウィンドウを開きます。

2.  **キャプチャ設定の構成:**

    *   **Capture Source (キャプチャソース):** 希望のソースを選択します:
        *   `GameView`: 指定された `Target Camera` から、ゲームビューの現在のレンダリング解像度を使用してキャプチャします。
        *   `SceneView`: 最後のアクティブなシーンビューのコンテンツをキャプチャします。`Target Camera` の設定は、キャプチャのためにシーンがどのようにレンダリングされるかに影響します（例：クリアフラグなど）。
        *   `RenderTexture`: これを選択すると、オブジェクトフィールドが表示されます。希望の `RenderTexture` アセットをこの「Render Texture」フィールドにドラッグします。
    *   **Scene Cameras (シーンカメラ) / Target Camera (ターゲットカメラ):**
        *   **Scene Cameras (ドロップダウン):** 現在のシーン内のカメラのリストからカメラを選択します。「None」も選択肢の一つです。
        *   **Target Camera (オブジェクトフィールド):** または、シーン階層またはプロジェクトウィンドウから `Camera` オブジェクトをこのフィールドに直接ドラッグします。
        *   *注意:* これら2つのフィールドは同期しています。ほとんどのキャプチャが正しく機能するためには、カメラが `Target Camera` に割り当てられている必要があります。ツールはデフォルトで `Camera.main` または最初に見つかったカメラを使用しようとします。
    *   **Output Directory (出力ディレクトリ):**
        *   キャプチャしたPNGを保存するパスを入力します。
        *   例: `Assets/Screenshots` (Assetsフォルダ内に保存)。
        *   例: `../ProjectCaptures` (`Assets` フォルダと同じレベル、つまりプロジェクトルートに `ProjectCaptures` という名前のフォルダに保存)。デフォルトは `../Captures` です。
    *   **Include Alpha Channel (アルファチャンネルを含める):**
        *   PNGをアルファチャンネル付きで保存する場合（RGBA32形式）、このボックスをチェックします。これは透明性のために必要です。
        *   チェックしない場合、画像はアルファなしで保存されます（RGB24形式）。
    *   **Transparent Background (透明な背景):**
        *   キャプチャに透明な背景を持たせたい場合（例：スカイボックスや不透明な背景をレンダリングしていない場合など）、このボックスをチェックします。
        *   これは、キャプチャ中に `Target Camera` のクリアフラグを `SolidColor` に、背景色を完全に透明に一時的に設定することで機能します。カメラの元の設定は後で復元されます。

3.  **キャプチャの実行:**
    *   **"Capture and Save PNG"** ボタンをクリックします。
    *   また、`Tools > CaptureWindow > Capture & Save` （デフォルトのショートカット: **Ctrl+Shift+F9**）からウィンドウを開かずに実行することもできます。ショートカットは Unity の Shortcut Manager から変更できます。
    *   設定に基づいて画像がレンダリングされ、指定された `Output Directory` に保存されます。
    *   ファイルパスを含む確認メッセージがUnityコンソールに記録されます。

4.  **出力へのアクセス:**
    *   **"Open Output Folder"** ボタンをクリックすると、指定された出力ディレクトリがオペレーティングシステムのファイルエクスプローラで開きます。

### 重要事項:

-   特に `RenderTexture` ソースを使用していない場合は、「Target Camera」フィールドで有効なカメラが選択されていることを確認してください。
-   「Transparent Background」オプションは、カメラがスカイボックスやソリッドな不透明な背景をレンダリングしていない場合に最適に機能します。
-   ゲームビューキャプチャの解像度は、ゲームビューの現在の解像度設定によって決まります。
-   シーンビューキャプチャの解像度は、シーンビューウィンドウのピクセル寸法によって決まります。
