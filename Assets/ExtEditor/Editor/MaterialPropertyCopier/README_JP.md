# Material Property Copier (マテリアルプロパティコピー)

## 概要

Material Property Copierは、シェーダープロパティの値をあるソースマテリアルから1つ以上のターゲットマテリアルに転送するプロセスを効率化するために設計されたUnityエディタツールです。色、テクスチャ、float値、ベクターなどのプロパティを選択的にコピーし、他のマテリアルに貼り付けることができます。

このツールは特に以下のような場合に役立ちます:
-   同じシェーダーまたは類似のシェーダープロパティを共有する複数のマテリアル間で一貫した外観を適用する必要がある場合。
-   既存のマテリアルをベースに新しいマテリアルを迅速にセットアップし、その後調整したい場合。
-   マテリアルの外観を繰り返し調整し、関連する他のマテリアルに変更を効率的に反映させたい場合。

## 主な機能

-   **ソースマテリアルの選択:** プロパティを読み取る単一のマテリアルをソースとして指定します。
-   **選択的なプロパティコピー:**
    -   ソースマテリアルから互換性のあるすべてのシェーダープロパティ（色、ベクター、Float/Range、テクスチャ）をリスト表示します。
    -   チェックボックスを使用してコピーするプロパティを個別に選択できます。
    -   迅速な選択変更のために「すべて選択」および「選択解除」ボタンが含まれています。
-   **複数のターゲットマテリアル:**
    -   コピーしたプロパティを複数のターゲットマテリアルに同時に適用することをサポートします。
    -   ターゲットマテリアルは、以下の方法でリストに追加できます:
        -   プロジェクトウィンドウでの選択（「プロジェクトから選択したマテリアルを追加」ボタン）。
        -   ツールUI内の指定された領域へのマテリアルアセットのドラッグアンドドロップ。
    -   個々のターゲットマテリアルはリストから削除できます。
-   **コピー＆ペーストワークフロー:**
    -   専用の「ソースから選択したプロパティをコピー」ボタンが、選択したプロパティ値をキャッシュします。
    -   「ターゲットにコピーしたプロパティを貼り付け」ボタンが、これらのキャッシュされた値をターゲットリスト内のすべてのマテリアルに適用します。
-   **プロパティマッチングロジック:**
    -   プロパティは、内部シェーダープロパティ名によって照合されます。
    -   ツールは基本的な型チェックを実行します：コピーされたプロパティとターゲットマテリアルのプロパティの型（例：Color、Float、Texture）が一致する場合にのみプロパティを貼り付けます。
-   **フィードバックとエラー処理:**
    -   ダイアログボックスで、コピーおよび貼り付け操作の成功を確認します。
    -   以下の場合、Unityコンソールに警告が記録されます:
        -   ターゲットマテリアルにコピーされたプロパティが存在しない場合。
        -   ソースとターゲットマテリアル間でプロパティの型が一致しない場合。
-   **元に戻す機能:** 貼り付け操作はUnityの元に戻すシステムに登録されるため、変更を簡単に元に戻すことができます（Ctrl+Z / Cmd+Z）。

## 使い方

1.  **ツールを開く:**
    *   Unityエディタのメニューバーで `Tools > Material Property Copier` に移動します。これにより、「Material Property Copier」ウィンドウが開きます。

2.  **ソースマテリアルの割り当て:**
    *   ツールウィンドウの「Source Material」セクションで、プロジェクトウィンドウからマテリアルアセットをオブジェクトフィールドにドラッグします。

3.  **コピーするプロパティの選択:**
    *   ソースマテリアルが割り当てられると、「Shader Properties」リストに利用可能なプロパティが入力されます。
    *   各プロパティ名の横にあるチェックボックスを使用して、コピーしたいものを選択します。
    *   より速い選択のために「すべて選択」または「選択解除」ボタンを使用できます。

4.  **選択したプロパティのコピー:**
    *   **「Copy Selected Properties from Source」** ボタンをクリックします。
    *   ツールの内部バッファに正常にコピーされたプロパティの数を示す確認ダイアログが表示されます。

5.  **ターゲットマテリアルの追加:**
    *   「Target Materials」リストには、以下のいずれかの方法でマテリアルを追加できます:
        *   **プロジェクト選択:** Unityのプロジェクトウィンドウで1つ以上のマテリアルアセットを選択します。次に、Material Property Copierウィンドウで **「Add Selected Materials from Project」** ボタンをクリックします。
        *   **ドラッグアンドドロップ:** プロジェクトウィンドウからマテリアルアセットを直接ドラッグし、ツールウィンドウ内の **「Drag & Drop Materials Here」** とラベル付けされた領域にドロップします。
    *   追加されたマテリアルがリストに表示されます。各エントリの横にある「X」ボタンをクリックすることで、このリストから任意のマテリアルを削除できます。

6.  **ターゲットマテリアルへのプロパティの貼り付け:**
    *   目的のターゲットマテリアルがリストされ、プロパティがコピーされたら、**「Paste Copied Properties to Target(s)」** ボタンをクリックします。
    *   ツールは各ターゲットマテリアルを反復処理し、コピーされたプロパティ値を適用しようとします。
    *   影響を受けたマテリアルの数を示す確認ダイアログが表示されます。
    *   **重要:** Unityコンソールで警告を確認してください。警告は、特定のプロパティが特定のマテリアルに貼り付けられなかったことを示している可能性があります（例：ターゲットマテリアルがコピーされたプロパティを持たない別のシェーダーを使用している場合や、プロパティタイプが一致しない場合など）。

7.  **元に戻す（必要な場合）:**
    *   結果が期待したものでない場合は、Unityの標準の元に戻すコマンド（編集 > 元に戻す、またはCtrl+Z / Cmd+Z）を使用して、ターゲットマテリアルに加えられた変更を元に戻すことができます。

このツールは、共通の特性を共有する複数のマテリアルを扱う際に、一貫性を維持し、マテリアルのセットアップワークフローを高速化するのに役立ちます。
