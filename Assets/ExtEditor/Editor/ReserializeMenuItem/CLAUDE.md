# ReserializeMenuItem Tool

このファイルは、ReserializeMenuItemツールでの作業時にClaude Codeへのガイダンスを提供します。

## ツール概要

ReserializeMenuItemツールは、選択したアセットとそのメタデータを強制的に再シリアライズするエディター拡張です。アセットデータベースの問題修正やシリアライズ変更の適用に使用されます。

## 主要機能

### 基本機能
- **アセット再シリアライズ**: 選択アセットのシリアライズデータを再生成
- **メタデータ含有**: アセットとメタデータの両方を再シリアライズ
- **バッチ処理**: 複数選択アセットを一度に処理
- **シンプルインターフェース**: 右クリックメニューの単一オプション

### 使用方法
1. Projectウィンドウでアセットを選択
2. 右クリック → Assets → Reserialize
3. Unityが選択されたアセットを再シリアライズ

## 実装詳細

### ファイル構造
- **ReserializeMenuItem.cs**: 単一静的クラスでの実装

### メニュー統合
```csharp
[MenuItem("Assets/Reserialize")]
public static void ReserializeAssets()
```

### 処理フロー
1. `Selection.objects`から選択オブジェクトを取得
2. LINQを使用してアセットパスを抽出
3. `AssetDatabase.ForceReserializeAssets()`で再シリアライズ実行

## 技術的特徴

### 再シリアライズオプション
- **ForceReserializeAssetsOptions.ReserializeAssetsAndMetadata**: アセットとメタデータの完全再シリアライズ
- **包括的処理**: .meta ファイルを含む完全な再処理

### 対象アセット
- **全Unity アセット**: すべてのUnityアセットタイプに対応
- **制限なし**: 特定のファイル形式に制限されない汎用処理

### パフォーマンス
- **Unity依存**: Unity内蔵の最適化されたシリアライズエンジンを使用
- **効率的**: 必要な部分のみを再処理

## 使用場面

### 問題解決
- **アセットデータベース破損**: 破損したアセット参照の修復
- **シリアライズエラー**: シリアライズ形式の不整合修正
- **メタデータ問題**: メタファイルの不整合解決

### 開発ワークフロー
- **Unity バージョン移行**: Unity バージョン間でのアセット形式更新
- **シリアライズ変更適用**: コードでのシリアライズ変更の反映
- **データベース更新**: アセットデータベースの最新化

### メンテナンス
- **定期保守**: プロジェクトの定期的なアセット整合性チェック
- **問題予防**: 問題発生前の予防的再シリアライズ

## 開発ノート

### 安全性
- **非破壊処理**: 元のアセットデータを破壊しない安全な操作
- **Unity管理**: Unity内蔵システムによる信頼性の高い処理
- **自動バックアップ**: Unityのバージョン管理統合での自動バックアップ

### 制限事項
- **処理時間**: 大量アセットの処理には時間がかかる場合がある
- **エディター依存**: Unity エディター環境でのみ実行可能
- **一時的ロック**: 処理中の一時的なアセットアクセス制限

### 拡張可能性
- **進捗表示**: `EditorUtility.DisplayProgressBar`による進捗表示追加
- **選択的処理**: 特定タイプのみの再シリアライズ
- **ログ出力**: 処理されたアセットの詳細ログ
- **設定オプション**: 再シリアライズオプションの選択機能

### ベストプラクティス
- **バックアップ**: 重要なプロジェクトでは事前バックアップ推奨
- **段階的処理**: 大量アセットは段階的に処理
- **テスト環境**: 本番前のテスト環境での動作確認

### トラブルシューティング
- **処理中断**: 長時間処理の場合は分割処理を検討
- **メモリ不足**: 大量アセット処理時のメモリ使用量監視
- **権限問題**: 読み取り専用ファイルでの処理エラー対応

### 実装の簡潔性
- **最小限実装**: 必要最小限の機能に集中
- **Unity API活用**: Unity標準APIを最大限活用
- **保守性**: シンプルな実装による高い保守性