# FolderMenuItemExtension Tool

このファイルは、FolderMenuItemExtensionツールでの作業時にClaude Codeへのガイダンスを提供します。

## ツール概要

FolderMenuItemExtensionツールは、事前定義されたフォルダー構造を作成するカスタム右クリックメニューアイテムを生成するエディター拡張です。`.fmi`ファイルを使用してフォルダー作成テンプレートを定義します。

## 主要機能

### 基本機能
- **カスタムフォルダー作成**: 事前定義されたフォルダー構造の生成
- **テンプレートベースシステム**: `.fmi`ファイルによるフォルダー作成テンプレートの定義
- **動的メニュー生成**: 自動的にC#スクリプトを生成してメニューアイテムを追加
- **優先度制御**: `.fmi`ファイルの最初の行でメニュー優先度を設定
- **柔軟なフォルダーリスト**: テキスト形式での任意フォルダー構造定義

### 使用方法
1. FolderMenuItemPresetフォルダーに`.fmi`拡張子のテキストファイルを作成
2. 最初の行: 優先度番号（小さい数字ほどメニュー上位に表示）
3. 以降の行: 作成するフォルダー名
4. システムが自動的にC#スクリプトを生成してメニューアイテムを作成
5. Projectウィンドウのフォルダー右クリック → Assets → Create → Folders → [メニュー名]

## 実装詳細

### ファイル構造
- **CreateFoldersMenuItem.cs**: 生成されるメニューアイテムのテンプレート
- **FolderMenuItemImporter.cs**: `.fmi`ファイルを処理するカスタムインポーター

### ファイル形式
```
1
Textures
Materials
Models
Scripts
```

### 技術的特徴
- **ScriptedImporter**: `.fmi`ファイル用のカスタムインポーター
- **コード生成**: テンプレート文字列置換によるC#スクリプト生成
- **自動リフレッシュ**: スクリプト生成後のAssetDatabase自動更新

## 設定詳細

### メニュー設定
- **生成メニューパス**: `Assets/Create/Folders/[filename]`
- **優先度オフセット**: 優先度に21を加算してUnityデフォルト"Folder"オプションの下に配置
- **対象**: Project内のフォルダー上での右クリックメニュー

### テンプレートシステム
- **プレースホルダー**:
  - `FOLDERMENUITEMCLASSNAME`: 生成クラス名
  - `FOLDERMENUITEMNAME`: メニュー表示名
  - `FOLDERLIST`: フォルダー作成コード
  - `PRIORITY`: メニュー優先度

### 生成ファイル
- **出力場所**: インポーターと同じディレクトリ
- **ファイル名**: `[fmiファイル名].cs`
- **内容**: MenuItemアトリビュート付きの静的メソッド

## 開発ノート

### インポーター動作
1. `.fmi`ファイルの内容を読み込み
2. 最初の行を優先度として解析
3. 残りの行をフォルダー名として処理
4. テンプレートファイルから文字列置換でC#コード生成
5. 生成されたスクリプトをAssetDatabaseに追加

### エラーハンドリング
- **ファイル読み込みエラー**: 不正な`.fmi`ファイル形式の処理
- **優先度解析**: 数値以外の優先度行の処理
- **空ファイル**: 内容のない`.fmi`ファイルの処理

### 拡張性
- **新しいプレースホルダー**: テンプレートシステムに新機能追加可能
- **カスタムメニューパス**: メニュー配置場所のカスタマイズ
- **追加メタデータ**: `.fmi`ファイルへの追加情報統合

### 制限事項
- **静的生成**: 実行時の動的フォルダー作成は不可
- **単一階層**: ネストしたフォルダー構造は個別のフォルダー作成として処理
- **Unity依存**: Unityエディター環境でのみ動作

### ベストプラクティス
- **命名規則**: `.fmi`ファイル名がメニュー項目名になるため、わかりやすい名前を使用
- **優先度設定**: よく使用するテンプレートには小さい優先度番号を設定
- **フォルダー命名**: 作成されるフォルダー名にはUnityの命名規則に従う